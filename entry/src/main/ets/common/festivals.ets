// èŠ‚æ—¥é…ç½®å’Œæ£€æµ‹
import { i18n } from '@kit.LocalizationKit';

export interface Festival {
  name: string;
  description: string;
  emoji: string;
  recommendedFoods: string[]; // æ¨èçš„é£Ÿç‰©åç§°
  startDate: string; // MM-DD æ ¼å¼ï¼ˆé˜³å†ï¼‰æˆ–å†œå†æœˆæ—¥
  endDate: string; // MM-DD æ ¼å¼ï¼ˆé˜³å†ï¼‰æˆ–å†œå†æœˆæ—¥
  type: 'traditional' | 'modern';
  isLunar: boolean; // æ˜¯å¦ä¸ºå†œå†èŠ‚æ—¥
  lunarMonth?: number; // å†œå†æœˆä»½ï¼ˆ1-12ï¼‰
  lunarDay?: number; // å†œå†æ—¥æœŸï¼ˆ1-30ï¼‰
  lunarDayRange?: number; // å†œå†æ—¥æœŸèŒƒå›´ï¼ˆä¾‹å¦‚æ˜¥èŠ‚æŒç»­7å¤©ï¼‰
}

interface LunarDateInfo {
  year: number;
  month: number;
  day: number;
}

// å†œå†æ•°æ®è¡¨ï¼ˆæ¯å¹´12/13ä¸ªæœˆçš„å¤©æ•°ï¼‰
// æ•°æ®æ ¼å¼ï¼š16è¿›åˆ¶ï¼Œæ¯4ä½è¡¨ç¤ºä¸€ä¸ªæœˆï¼Œ0xä¸º29å¤©ï¼Œ0x1ä¸º30å¤©
const lunarInfo: number[] = [
  0x04bd8, 0x04ae0, 0x0a570, 0x054d5, 0x0d260, 0x0d950, 0x16554, 0x056a0, 0x09ad0, 0x055d2, // 1900-1909
  0x04ae0, 0x0a5b6, 0x0a4d0, 0x0d250, 0x1d255, 0x0b540, 0x0d6a0, 0x0ada2, 0x095b0, 0x14977, // 1910-1919
  0x04970, 0x0a4b0, 0x0b4b5, 0x06a50, 0x06d40, 0x1ab54, 0x02b60, 0x09570, 0x052f2, 0x04970, // 1920-1929
  0x06566, 0x0d4a0, 0x0ea50, 0x16a95, 0x05ad0, 0x02b60, 0x186e3, 0x092e0, 0x1c8d7, 0x0c950, // 1930-1939
  0x0d4a0, 0x1d8a6, 0x0b550, 0x056a0, 0x1a5b4, 0x025d0, 0x092d0, 0x0d2b2, 0x0a950, 0x0b557, // 1940-1949
  0x06ca0, 0x0b550, 0x15355, 0x04da0, 0x0a5b0, 0x14573, 0x052b0, 0x0a9a8, 0x0e950, 0x06aa0, // 1950-1959
  0x0aea6, 0x0ab50, 0x04b60, 0x0aae4, 0x0a570, 0x05260, 0x0f263, 0x0d950, 0x05b57, 0x056a0, // 1960-1969
  0x096d0, 0x04dd5, 0x04ad0, 0x0a4d0, 0x0d4d4, 0x0d250, 0x0d558, 0x0b540, 0x0b6a0, 0x195a6, // 1970-1979
  0x095b0, 0x049b0, 0x0a974, 0x0a4b0, 0x0b27a, 0x06a50, 0x06d40, 0x0af46, 0x0ab60, 0x09570, // 1980-1989
  0x04af5, 0x04970, 0x064b0, 0x074a3, 0x0ea50, 0x06b58, 0x055c0, 0x0ab60, 0x096d5, 0x092e0, // 1990-1999
  0x0c960, 0x0d954, 0x0d4a0, 0x0da50, 0x07552, 0x056a0, 0x0abb7, 0x025d0, 0x092d0, 0x0cab5, // 2000-2009
  0x0a950, 0x0b4a0, 0x0baa4, 0x0ad50, 0x055d9, 0x04ba0, 0x0a5b0, 0x15176, 0x052b0, 0x0a930, // 2010-2019
  0x07954, 0x06aa0, 0x0ad50, 0x05b52, 0x04b60, 0x0a6e6, 0x0a4e0, 0x0d260, 0x0ea65, 0x0d530, // 2020-2029
  0x05aa0, 0x076a3, 0x096d0, 0x04bd7, 0x04ad0, 0x0a4d0, 0x1d0b6, 0x0d250, 0x0d520, 0x0dd45  // 2030-2039
];

// å…¬å†è½¬å†œå†
function solarToLunar(solarYear: number, solarMonth: number, solarDay: number): LunarDateInfo | null {
  try {
    // åŸºå‡†æ—¥æœŸï¼š1900å¹´1æœˆ31æ—¥æ˜¯å†œå†1900å¹´æ­£æœˆåˆä¸€
    const baseDate = new Date(1900, 0, 31);
    const targetDate = new Date(solarYear, solarMonth - 1, solarDay);
    
    // è®¡ç®—å¤©æ•°å·®
    let offset = Math.floor((targetDate.getTime() - baseDate.getTime()) / 86400000);
    
    let lunarYear = 1900;
    let daysInYear = 0;
    
    // è®¡ç®—å†œå†å¹´ä»½
    for (let i = 1900; i < 2100 && offset > 0; i++) {
      daysInYear = getLunarYearDays(i);
      if (offset < daysInYear) {
        lunarYear = i;
        break;
      }
      offset -= daysInYear;
    }
    
    // è®¡ç®—å†œå†æœˆä»½
    let leapMonth = getLeapMonth(lunarYear);
    let isLeap = false;
    let lunarMonth = 1;
    let daysInMonth = 0;
    
    for (let i = 1; i <= 12; i++) {
      // é—°æœˆ
      if (leapMonth > 0 && i === leapMonth + 1 && !isLeap) {
        i--;
        isLeap = true;
        daysInMonth = getLeapMonthDays(lunarYear);
      } else {
        daysInMonth = getLunarMonthDays(lunarYear, i);
      }
      
      if (offset < daysInMonth) {
        lunarMonth = i;
        break;
      }
      
      offset -= daysInMonth;
      
      if (isLeap && i === leapMonth + 1) {
        isLeap = false;
      }
    }
    
    let lunarDay = offset + 1;
    
    return {
      year: lunarYear,
      month: lunarMonth,
      day: lunarDay
    };
  } catch (err) {
    console.error('å†œå†è½¬æ¢å¤±è´¥:', err);
    return null;
  }
}

// è·å–å†œå†å¹´ä»½çš„æ€»å¤©æ•°
function getLunarYearDays(year: number): number {
  let sum = 348;
  for (let i = 0x8000; i > 0x8; i >>= 1) {
    sum += (lunarInfo[year - 1900] & i) ? 1 : 0;
  }
  return sum + getLeapMonthDays(year);
}

// è·å–å†œå†å¹´ä»½çš„é—°æœˆå¤©æ•°
function getLeapMonthDays(year: number): number {
  if (getLeapMonth(year)) {
    return (lunarInfo[year - 1900] & 0x10000) ? 30 : 29;
  }
  return 0;
}

// è·å–å†œå†å¹´ä»½çš„é—°æœˆæœˆä»½ï¼ˆ0è¡¨ç¤ºæ— é—°æœˆï¼‰
function getLeapMonth(year: number): number {
  return lunarInfo[year - 1900] & 0xf;
}

// è·å–å†œå†æœˆä»½çš„å¤©æ•°
function getLunarMonthDays(year: number, month: number): number {
  return (lunarInfo[year - 1900] & (0x10000 >> month)) ? 30 : 29;
}

// è·å–å½“å‰å†œå†æ—¥æœŸ
function getLunarDate(): LunarDateInfo | null {
  try {
    const now = new Date();
    const lunar = solarToLunar(now.getFullYear(), now.getMonth() + 1, now.getDate());
    
    if (lunar) {
      console.info(`é˜³å†: ${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}`);
      console.info(`å†œå†: ${lunar.year}å¹´${lunar.month}æœˆ${lunar.day}æ—¥`);
    }
    
    return lunar;
  } catch (err) {
    console.error('è·å–å†œå†æ—¥æœŸå¤±è´¥:', err);
    return null;
  }
}

// åˆ¤æ–­æ˜¯å¦åœ¨å†œå†æ—¥æœŸèŒƒå›´å†…
function isInLunarRange(currentMonth: number, currentDay: number, 
                       targetMonth: number, targetDay: number, dayRange: number): boolean {
  if (currentMonth !== targetMonth) return false;
  
  if (dayRange === 1) {
    return currentDay === targetDay;
  } else {
    // å¤„ç†è·¨æœˆæƒ…å†µï¼ˆç†è®ºä¸Šæ˜¥èŠ‚å¯èƒ½è·¨æœˆï¼Œä½†å®é™…å¾ˆå°‘è§ï¼‰
    return currentDay >= targetDay && currentDay < targetDay + dayRange;
  }
}

// èŠ‚æ—¥é…ç½®åˆ—è¡¨
const festivals: Festival[] = [
  // ä¼ ç»ŸèŠ‚æ—¥ï¼ˆå†œå†ï¼‰
  {
    name: 'é™¤å¤•',
    description: 'è¾æ—§è¿æ–°ï¼Œå®ˆå²å›¢åœ†',
    emoji: 'ğŸ†',
    recommendedFoods: ['é¥ºå­', 'é±¼', 'å¹´ç³•', 'æ˜¥å·', 'çº¢çƒ§è‚‰', 'ä½›è·³å¢™', 'å…«å®é¥­'],
    startDate: '',
    endDate: '',
    type: 'traditional',
    isLunar: true,
    lunarMonth: 12,
    lunarDay: 30, // è…Šæœˆä¸‰åï¼ˆæˆ–äºŒåä¹ï¼‰
    lunarDayRange: 1
  },
  {
    name: 'æ˜¥èŠ‚',
    description: 'æ–°æ˜¥ä½³èŠ‚ï¼Œé˜–å®¶å›¢åœ†',
    emoji: 'ğŸŠ',
    recommendedFoods: ['é¥ºå­', 'æ±¤åœ†', 'å¹´ç³•', 'é±¼', 'çº¢çƒ§è‚‰', 'æ˜¥å·', 'å…«å®é¥­', 'ä½›è·³å¢™'],
    startDate: '',
    endDate: '',
    type: 'traditional',
    isLunar: true,
    lunarMonth: 1,
    lunarDay: 1, // æ­£æœˆåˆä¸€åˆ°åˆä¸ƒ
    lunarDayRange: 7
  },
  {
    name: 'å…ƒå®µèŠ‚',
    description: 'æ­£æœˆåäº”é—¹å…ƒå®µ',
    emoji: 'ğŸ®',
    recommendedFoods: ['æ±¤åœ†', 'å…ƒå®µ'],
    startDate: '',
    endDate: '',
    type: 'traditional',
    isLunar: true,
    lunarMonth: 1,
    lunarDay: 15,
    lunarDayRange: 1
  },
  {
    name: 'ç«¯åˆèŠ‚',
    description: 'é¾™èˆŸç«æ¸¡ï¼Œç²½é¦™å››æº¢',
    emoji: 'ğŸ‰',
    recommendedFoods: ['ç²½å­', 'å’¸é¸­è›‹', 'é»„é³'],
    startDate: '',
    endDate: '',
    type: 'traditional',
    isLunar: true,
    lunarMonth: 5,
    lunarDay: 5,
    lunarDayRange: 1
  },
  {
    name: 'ä¸ƒå¤•èŠ‚',
    description: 'é¹Šæ¡¥ç›¸ä¼šï¼Œæµªæ¼«ä½³èŠ‚',
    emoji: 'ğŸ’',
    recommendedFoods: ['å·§æœ', 'å·§å…‹åŠ›', 'è›‹ç³•', 'ç‰›æ’', 'æŠ«è¨'],
    startDate: '',
    endDate: '',
    type: 'traditional',
    isLunar: true,
    lunarMonth: 7,
    lunarDay: 7,
    lunarDayRange: 1
  },
  {
    name: 'ä¸­ç§‹èŠ‚',
    description: 'æœˆåœ†äººå›¢åœ†',
    emoji: 'ğŸ¥®',
    recommendedFoods: ['æœˆé¥¼', 'å¤§é—¸èŸ¹', 'æŸšå­'],
    startDate: '',
    endDate: '',
    type: 'traditional',
    isLunar: true,
    lunarMonth: 8,
    lunarDay: 15,
    lunarDayRange: 1
  },
  {
    name: 'é‡é˜³èŠ‚',
    description: 'ç™»é«˜èµèŠï¼Œæ•¬è€çˆ±è€',
    emoji: 'ğŸŒ¼',
    recommendedFoods: ['é‡é˜³ç³•', 'èŠèŠ±é…’'],
    startDate: '',
    endDate: '',
    type: 'traditional',
    isLunar: true,
    lunarMonth: 9,
    lunarDay: 9,
    lunarDayRange: 1
  },
  {
    name: 'è…Šå…«èŠ‚',
    description: 'è…Šå…«è…Šå…«ï¼Œå†»æ‰ä¸‹å·´',
    emoji: 'ğŸ¥£',
    recommendedFoods: ['è…Šå…«ç²¥'],
    startDate: '',
    endDate: '',
    type: 'traditional',
    isLunar: true,
    lunarMonth: 12,
    lunarDay: 8,
    lunarDayRange: 1
  },
  {
    name: 'å°å¹´',
    description: 'æ‰«å°˜é€ç¶ï¼Œè¿æ–°çº³ç¦',
    emoji: 'ğŸ§¹',
    recommendedFoods: ['ç¶ç³–', 'å¹´ç³•', 'é¥ºå­'],
    startDate: '',
    endDate: '',
    type: 'traditional',
    isLunar: true,
    lunarMonth: 12,
    lunarDay: 23,
    lunarDayRange: 1
  },
  
  // ä¼ ç»ŸèŠ‚æ—¥ï¼ˆé˜³å†ï¼‰
  {
    name: 'æ¸…æ˜èŠ‚',
    description: 'è¸é’æ‰«å¢“ï¼Œç¼…æ€€å…ˆäºº',
    emoji: 'ğŸŒ¸',
    recommendedFoods: ['é’å›¢', 'è‰¾è‰ç³•'],
    startDate: '04-04',
    endDate: '04-06',
    type: 'traditional',
    isLunar: false
  },
  {
    name: 'å†¬è‡³',
    description: 'æ•°ä¹å¯’å†¬å§‹ï¼Œæ¸©æš–åœ¨å¿ƒé—´',
    emoji: 'â˜ƒï¸',
    recommendedFoods: ['é¥ºå­', 'æ±¤åœ†', 'ç¾Šè‚‰æ±¤', 'ç«é”…'],
    startDate: '12-21',
    endDate: '12-23',
    type: 'traditional',
    isLunar: false
  },
  
  // ç°ä»£èŠ‚æ—¥
  {
    name: 'å…ƒæ—¦',
    description: 'æ–°å¹´æ–°æ°”è±¡',
    emoji: 'ğŸ‰',
    recommendedFoods: ['ç«é”…', 'çƒ§çƒ¤', 'æŠ«è¨', 'æ±‰å ¡', 'è›‹ç³•'],
    startDate: '01-01',
    endDate: '01-03',
    type: 'modern',
    isLunar: false
  },
  {
    name: 'æƒ…äººèŠ‚',
    description: 'æµªæ¼«ä¹‹å¤œ',
    emoji: 'ğŸ’•',
    recommendedFoods: ['ç‰›æ’', 'æ„å¤§åˆ©é¢', 'æŠ«è¨', 'è›‹ç³•', 'å·§å…‹åŠ›', 'çº¢é…’'],
    startDate: '02-14',
    endDate: '02-14',
    type: 'modern',
    isLunar: false
  },
  {
    name: 'åŠ³åŠ¨èŠ‚',
    description: 'åŠ³åŠ¨æœ€å…‰è£',
    emoji: 'ğŸˆ',
    recommendedFoods: ['çƒ§çƒ¤', 'ç«é”…', 'å°é¾™è™¾', 'çƒ¤è‚‰'],
    startDate: '05-01',
    endDate: '05-05',
    type: 'modern',
    isLunar: false
  },
  {
    name: 'å„¿ç«¥èŠ‚',
    description: 'ç«¥å¿ƒæœªæ³¯',
    emoji: 'ğŸ­',
    recommendedFoods: ['æ±‰å ¡', 'æŠ«è¨', 'ç‚¸é¸¡', 'è–¯æ¡', 'å†°æ·‡æ·‹', 'è›‹ç³•', 'ç”œç”œåœˆ'],
    startDate: '06-01',
    endDate: '06-01',
    type: 'modern',
    isLunar: false
  },
  {
    name: 'å›½åº†èŠ‚',
    description: 'æ™®å¤©åŒåº†',
    emoji: 'ğŸ‡¨ğŸ‡³',
    recommendedFoods: ['ç«é”…', 'çƒ§çƒ¤', 'åŒ—äº¬çƒ¤é¸­', 'å°é¾™è™¾'],
    startDate: '10-01',
    endDate: '10-07',
    type: 'modern',
    isLunar: false
  },
  {
    name: 'ä¸‡åœ£èŠ‚',
    description: 'Trick or Treat',
    emoji: 'ğŸƒ',
    recommendedFoods: ['å—ç“œæ´¾', 'æŠ«è¨', 'æ±‰å ¡', 'ç‚¸é¸¡'],
    startDate: '10-31',
    endDate: '10-31',
    type: 'modern',
    isLunar: false
  },
  {
    name: 'æ„Ÿæ©èŠ‚',
    description: 'æ„Ÿæ©æœ‰ä½ ',
    emoji: 'ğŸ¦ƒ',
    recommendedFoods: ['çƒ¤é¸¡', 'ç«é¸¡', 'å—ç“œæ´¾', 'ç‰›æ’'],
    startDate: '11-28', // è¿‘ä¼¼
    endDate: '11-28',
    type: 'modern',
    isLunar: false
  },
  {
    name: 'å¹³å®‰å¤œ',
    description: 'å¹³å®‰å–œä¹',
    emoji: 'ğŸ„',
    recommendedFoods: ['çƒ¤é¸¡', 'ç‰›æ’', 'æŠ«è¨', 'è›‹ç³•', 'ç«é¸¡'],
    startDate: '12-24',
    endDate: '12-24',
    type: 'modern',
    isLunar: false
  },
  {
    name: 'åœ£è¯èŠ‚',
    description: 'Merry Christmas',
    emoji: 'ğŸ…',
    recommendedFoods: ['çƒ¤é¸¡', 'ç‰›æ’', 'ç«é¸¡', 'æŠ«è¨', 'è›‹ç³•'],
    startDate: '12-25',
    endDate: '12-25',
    type: 'modern',
    isLunar: false
  }
];

// è·å–å½“å‰æ—¥æœŸçš„èŠ‚æ—¥
export function getTodayFestival(): Festival | null {
  const now = new Date();
  const month = now.getMonth() + 1;
  const day = now.getDate();
  const todayStr = `${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
  
  // è·å–å†œå†æ—¥æœŸ
  const lunarDate = getLunarDate();
  console.info(`æ£€æµ‹èŠ‚æ—¥ - é˜³å†: ${todayStr}, å†œå†: ${lunarDate ? `${lunarDate.month}æœˆ${lunarDate.day}æ—¥` : 'null'}`);
  
  // å…ˆæ£€æŸ¥é˜³å†èŠ‚æ—¥ï¼ˆä¼˜å…ˆçº§é«˜ï¼‰
  for (let i = 0; i < festivals.length; i++) {
    const festival = festivals[i];
    
    if (!festival.isLunar) {
      // é˜³å†èŠ‚æ—¥ï¼šç›´æ¥æ¯”è¾ƒ
      if (isDateInRange(todayStr, festival.startDate, festival.endDate)) {
        console.info(`åŒ¹é…åˆ°é˜³å†èŠ‚æ—¥: ${festival.name}`);
        return festival;
      }
    }
  }
  
  // å†æ£€æŸ¥å†œå†èŠ‚æ—¥
  for (let i = 0; i < festivals.length; i++) {
    const festival = festivals[i];
    
    if (festival.isLunar) {
      // å†œå†èŠ‚æ—¥ï¼šä½¿ç”¨å®æ—¶å†œå†æ—¥æœŸåˆ¤æ–­
      if (lunarDate && festival.lunarMonth !== undefined && 
          festival.lunarDay !== undefined && festival.lunarDayRange !== undefined) {
        
        // ç‰¹æ®Šå¤„ç†é™¤å¤•ï¼ˆè…Šæœˆæœ€åä¸€å¤©ï¼Œå¯èƒ½æ˜¯29æˆ–30ï¼‰
        if (festival.name === 'é™¤å¤•') {
          if (lunarDate.month === 12) {
            // è·å–ä¸‹ä¸ªæœˆåˆä¸€æ¥åˆ¤æ–­æ˜¯å¦æ˜¯é™¤å¤•
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            const calendar = i18n.getCalendar('chinese');
            calendar.setTime(tomorrow);
            const tomorrowLunarMonth = (calendar.get('month') as number) + 1;
            const tomorrowLunarDay = calendar.get('date') as number;
            
            // å¦‚æœæ˜å¤©æ˜¯æ­£æœˆåˆä¸€ï¼Œä»Šå¤©å°±æ˜¯é™¤å¤•
            if (tomorrowLunarMonth === 1 && tomorrowLunarDay === 1) {
              console.info(`åŒ¹é…åˆ°å†œå†èŠ‚æ—¥: ${festival.name}`);
              return festival;
            }
          }
        } else {
          // å…¶ä»–å†œå†èŠ‚æ—¥æ­£å¸¸åˆ¤æ–­
          if (isInLunarRange(lunarDate.month, lunarDate.day, 
                            festival.lunarMonth, festival.lunarDay, festival.lunarDayRange)) {
            console.info(`åŒ¹é…åˆ°å†œå†èŠ‚æ—¥: ${festival.name}`);
            return festival;
          }
        }
      }
    }
  }
  
  console.info('æœªåŒ¹é…åˆ°ä»»ä½•èŠ‚æ—¥');
  return null;
}

// åˆ¤æ–­æ—¥æœŸæ˜¯å¦åœ¨èŒƒå›´å†…
function isDateInRange(dateStr: string, startStr: string, endStr: string): boolean {
  const date = parseMMDD(dateStr);
  const start = parseMMDD(startStr);
  const end = parseMMDD(endStr);
  
  // å¤„ç†è·¨å¹´æƒ…å†µï¼ˆå¦‚æ˜¥èŠ‚ï¼‰
  if (start > end) {
    return date >= start || date <= end;
  }
  
  return date >= start && date <= end;
}

// è§£æ MM-DD æ ¼å¼ä¸ºæ•°å­—ï¼ˆç”¨äºæ¯”è¾ƒï¼‰
function parseMMDD(mmdd: string): number {
  const parts = mmdd.split('-');
  const month = parseInt(parts[0]);
  const day = parseInt(parts[1]);
  return month * 100 + day;
}

// è·å–æ‰€æœ‰èŠ‚æ—¥åˆ—è¡¨
export function getAllFestivals(): Festival[] {
  return festivals;
}

// æ ¹æ®åç§°è·å–èŠ‚æ—¥
export function getFestivalByName(name: string): Festival | null {
  for (let i = 0; i < festivals.length; i++) {
    if (festivals[i].name === name) {
      return festivals[i];
    }
  }
  return null;
}

// è·å–å†œå†æ—¥æœŸå­—ç¬¦ä¸²ï¼ˆä¾›UIæ˜¾ç¤ºï¼‰
export function getLunarDateString(): string {
  const lunarDate = getLunarDate();
  if (!lunarDate) {
    return '';
  }
  
  // å†œå†æœˆä»½åç§°
  const monthNames = ['', 'æ­£æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ', 
                      'ä¸ƒæœˆ', 'å…«æœˆ', 'ä¹æœˆ', 'åæœˆ', 'å†¬æœˆ', 'è…Šæœˆ'];
  
  // å†œå†æ—¥æœŸåç§°
  const dayNames = ['', 'åˆä¸€', 'åˆäºŒ', 'åˆä¸‰', 'åˆå››', 'åˆäº”', 'åˆå…­', 'åˆä¸ƒ', 'åˆå…«', 'åˆä¹', 'åˆå',
                    'åä¸€', 'åäºŒ', 'åä¸‰', 'åå››', 'åäº”', 'åå…­', 'åä¸ƒ', 'åå…«', 'åä¹', 'äºŒå',
                    'å»¿ä¸€', 'å»¿äºŒ', 'å»¿ä¸‰', 'å»¿å››', 'å»¿äº”', 'å»¿å…­', 'å»¿ä¸ƒ', 'å»¿å…«', 'å»¿ä¹', 'ä¸‰å'];
  
  const monthName = lunarDate.month <= 12 ? monthNames[lunarDate.month] : `${lunarDate.month}æœˆ`;
  const dayName = lunarDate.day <= 30 ? dayNames[lunarDate.day] : `${lunarDate.day}æ—¥`;
  
  return `${monthName}${dayName}`;
}
